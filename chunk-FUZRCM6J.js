import{V as u,a,n as o}from"./chunk-U4TIDUP5.js";var d=class s{getChauffeurs(){throw new Error("Method not implemented.")}engins=[{id:1,type:"Chariot \xE9l\xE9vateur",modele:"Toyota 8FGU25",annee:2020,numeroSerie:"CE-TOY-2020-001",capacite:"2500 kg",plaqueImmatriculation:"AA-123-AA",documents:[{type:"Carte grise",dateExpiration:new Date("2025-12-31"),fichier:"carte_grise_001.pdf"}],statut:"disponible",dernierControle:new Date("2023-10-15"),prochaineMaintenance:new Date("2024-01-15")},{id:2,type:"Tracteur routier",modele:"Volvo FH16",annee:2021,numeroSerie:"TR-VOL-2021-001",capacite:"40000 kg",documents:[{type:"Carte grise",dateExpiration:new Date("2026-06-30"),fichier:"carte_grise_002.pdf"},{type:"Assurance",dateExpiration:new Date("2024-06-30"),fichier:"assurance_002.pdf"}],statut:"en mission"}];feuillesRoute=[{id:1,enginId:2,chauffeurId:3,dateDepart:new Date("2023-11-15T08:00:00"),voyages:[{id:1,depart:"Entrep\xF4t principal",arrivee:"Site client A",distance:150,cargaison:"Palettes de marchandises",client:"Client A",dureeEstimee:2.5}],lettresVoiture:[{id:1,numero:"LV-2023-001",date:new Date("2023-11-15"),client:"Client A",details:"Transport de 10 palettes",documents:["bon_commande_001.pdf"]}],statut:"en cours"}];maintenances=[{id:1,enginId:1,type:"Pr\xE9ventive",dateDebut:new Date("2023-11-10"),dateFin:new Date("2023-11-11"),description:"Vidange et contr\xF4le g\xE9n\xE9ral",cout:450,mecaniciens:[4,5],pieces:[{reference:"FILT-001",designation:"Filtre \xE0 huile",quantite:1,prixUnitaire:35,fournisseur:"AutoParts Inc."}],statut:"termin\xE9e",rapport:"Intervention r\xE9alis\xE9e sans anomalie"}];pleinsCarburant=[{id:1,enginId:2,date:new Date("2023-11-14"),volume:120,kilometrage:1850,prixLitre:1.85,conducteurId:3,lieu:"Station Total, Paris"}];consommations=[{enginId:2,periode:new Date("2023-11-01"),consommationMoyenne:32.5,alertes:[{id:1,enginId:2,date:new Date("2023-11-05"),type:"surconsommation",niveau:"moyen",resolved:!1}]}];dossiers=[{id:1,reference:"DOS-2023-001",client:"Client A",dateCreation:new Date("2023-11-01"),statut:"en cours",prestations:[{type:"transport",description:"Transport Paris-Lyon",quantite:1,prixUnitaire:1200,tvaApplicable:20}],montantHT:1200,tva:240,montantTTC:1440,documents:["devis_001.pdf"]}];factures=[{id:1,numero:"FAC-2023-001",dossierId:1,dateEmission:new Date("2023-11-10"),dateEcheance:new Date("2023-12-10"),montantHT:1200,tva:240,montantTTC:1440,statut:"envoy\xE9e",prestations:[{description:"Transport Paris-Lyon",quantite:1,prixUnitaire:1200,tvaApplicable:20}]}];positionsGPS=[{id:1,enginId:2,timestamp:new Date("2023-11-15T10:30:00"),latitude:48.8566,longitude:2.3522,vitesse:80,niveauCarburant:65,moteurAllume:!0}];users=[{id:1,username:"admin",password:"admin123",role:"admin",nom:"Administrateur",email:"admin@entreprise.com"},{id:3,username:"chauffeur",password:"chauf123",role:"chauffeur",nom:"Jean Dupont",permis:["C","CE"]}];auditLogs=[{id:1,timestamp:new Date("2023-11-15T08:00:00"),userId:1,username:"admin",action:"Connexion",details:"Authentification r\xE9ussie",ipAddress:"192.168.1.100"}];getEngins(){return o(this.engins)}getEngin(t){return this.engins.find(e=>e.id===t)}getFeuillesRoute(){return this.feuillesRoute}getFeuilleRoute(t){return this.feuillesRoute.find(e=>e.id===t)}getMaintenances(){return this.maintenances}getMaintenance(t){return this.maintenances.find(e=>e.id===t)}getPleinsCarburant(){return this.pleinsCarburant}getConsommations(){return this.consommations}getDossiers(){return this.dossiers}getDossier(t){return this.dossiers.find(e=>e.id===t)}getFactures(){return this.factures}getFacture(t){return this.factures.find(e=>e.id===t)}getPositionsGPS(){return this.positionsGPS}getUsers(){return this.users}getUser(t){return this.users.find(e=>e.id===t)}getAuditLogs(){return this.auditLogs}addEngin(t){let e=Math.max(...this.engins.map(i=>i.id))+1,n=a({id:e},t);return this.engins.push(n),n}updateEngin(t,e){let n=this.engins.findIndex(i=>i.id===t);if(n!==-1)return this.engins[n]=a(a({},this.engins[n]),e),this.engins[n]}addFeuilleRoute(t){let e=Math.max(...this.feuillesRoute.map(i=>i.id))+1,n=a({id:e},t);return this.feuillesRoute.push(n),n}getEnginsByStatus(t){return this.engins.filter(e=>e.statut===t)}getFeuillesRouteByEngin(t){return this.feuillesRoute.filter(e=>e.enginId===t)}getMaintenancesByEngin(t){return this.maintenances.filter(e=>e.enginId===t)}generateFacture(t){let e=this.getDossier(t);if(!e)throw new Error("Dossier non trouv\xE9");let n=Math.max(...this.factures.map(r=>r.id))+1,i={id:n,numero:`FAC-${new Date().getFullYear()}-${n.toString().padStart(3,"0")}`,dossierId:e.id,dateEmission:new Date,dateEcheance:new Date(Date.now()+30*24*60*60*1e3),montantHT:e.montantHT,tva:e.tva,montantTTC:e.montantTTC,statut:"brouillon",prestations:e.prestations.map(r=>({description:r.description,quantite:r.quantite,prixUnitaire:r.prixUnitaire,tvaApplicable:r.tvaApplicable}))};return this.factures.push(i),i}static \u0275fac=function(e){return new(e||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{d as a};
